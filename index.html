<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>QR Chance - Gagne ta bière</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #0a0f1c;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #00ffe0;
      text-align: center;
    }

    .container {
      padding-top: 30px;
    }

    img {
      max-width: 80%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 0 15px #00ffe0;
    }

    h1 {
      margin-top: 20px;
      font-size: 26px;
      color: white;
    }

    p {
      color: #ccc;
      font-size: 15px;
      margin-bottom: 10px;
    }

    #timer {
      font-size: 40px;
      margin: 20px 0;
      font-weight: bold;
    }

    #result {
      font-size: 24px;
      margin-top: 20px;
      font-weight: bold;
    }

    #btn {
      display: none;
      padding: 14px 24px;
      font-size: 18px;
      background-color: #00ffe0;
      border: none;
      color: #0a0f1c;
      border-radius: 5px;
      cursor: pointer;
    }

    .message {
      margin-top: 40px;
      font-size: 18px;
      color: #00ffe0;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="qrchance.png" alt="QR Chance">
    <h1>Scanne & tente ta chance !</h1>
    <p>Si tu cliques pile à 00:00, tu gagnes une bière à -50% !</p>

    <div id="timer">--:--</div>
    <button id="btn" onclick="tryLuck()">Je tente ma chance</button>
    <div id="result"></div>
    <div class="message" id="messageInfo"></div>
  </div>

  <script>
    const btn = document.getElementById("btn");
    const result = document.getElementById("result");
    const timer = document.getElementById("timer");
    const messageInfo = document.getElementById("messageInfo");

    const sessions = [
      { hour: 18, minuteStart: 0, minuteEnd: 30 },
      { hour: 19, minuteStart: 0, minuteEnd: 30 },
      { hour: 20, minuteStart: 0, minuteEnd: 30 },
      { hour: 22, minuteStart: 0, minuteEnd: 30 },
    ];

    function isInSession(now) {
      return sessions.some(session =>
        now.getHours() === session.hour &&
        now.getMinutes() >= session.minuteStart &&
        now.getMinutes() < session.minuteEnd
      );
    }

    function getRemainingTime(now) {
      let session = sessions.find(s =>
        now.getHours() === s.hour &&
        now.getMinutes() >= s.minuteStart &&
        now.getMinutes() < s.minuteEnd
      );
      if (!session) return null;

      const end = new Date(now);
      end.setMinutes(session.minuteEnd, 0, 0);
      const diff = end - now;
      return Math.floor(diff / 1000);
    }

    function formatTime(sec) {
      const m = String(Math.floor(sec / 60)).padStart(2, '0');
      const s = String(sec % 60).padStart(2, '0');
      return `${m}:${s}`;
    }

    function updateDisplay() {
      const now = new Date();
      if (isInSession(now)) {
        const secondsLeft = getRemainingTime(now);
        timer.textContent = formatTime(secondsLeft);

        if (secondsLeft === 0) {
          btn.style.display = 'inline-block';
        } else {
          btn.style.display = 'none';
        }

        messageInfo.textContent = '';
      } else {
        timer.textContent = "--:--";
        btn.style.display = 'none';
        result.textContent = '';
        messageInfo.textContent = "Attention : QRBoost actif à 18h, 19h, 20h et 22h. -50% pour les 5 plus rapides !";
      }
    }

    function tryLuck() {
      const now = new Date();
      if (now.getSeconds() === 0) {
        result.textContent = "GAGNÉ ! Clique réussi à " + now.toTimeString().slice(0, 8);
      } else {
        result.textContent = "RATÉ ! Clique effectué à " + now.toTimeString().slice(0, 8);
      }
    }

    setInterval(updateDisplay, 1000);
  </script>
</body>
</html>
